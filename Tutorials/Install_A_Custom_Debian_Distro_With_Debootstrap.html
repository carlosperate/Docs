<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Install A Custom Debian Distro With Debootstrap</title>
    <meta name="description" content="UDOO Board Documentation" />
    <meta name="author" content="UDOO Team">
    <meta charset="UTF-8">
    <link rel="icon" href="../templates/default/themes/udoo/img/favicon.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
     <meta name="google-site-verification" content="GlKlGkbxuWQ3LNWx0akLYkqoWLrtF5b0ug9UpGadSuc" />

<meta name="google-site-verification" content="vL1Qo6JWKZBq6fzVJLJhbyqHya1TBhZd78OJDA-Qe1s" />




<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-40057783-1']);
 _gaq.push(['_setDomainName', 'udoo.org']);
 _gaq.push(['_setAllowLinker', true]);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();

</script>

    <!-- Font -->
    <link href='//fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../templates/default/themes/udoo/css/udoo.css' rel='stylesheet' type='text/css'>
</head>
<body>
            <!-- Docs -->
                    <a href="https://github.com/UDOOboard/Docs" target="_blank" id="github-ribbon" class="hidden-print"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
                <div class="container-fluid fluid-height wrapper">
            <div class="navbar navbar-fixed-top hidden-print">
                <div class="container-fluid">
                    <a class="brand navbar-brand pull-left" href="http://udoo.org"><img src="http://udoo.org/docs/templates/default/themes/udoo/img/logo_docs.png" alt="" />   Docs</a>
                    <p class="navbar-text pull-right">Generated by <a href="http://daux.io">Daux.io</a></p>
                </div>
            </div>
            <div class="row columns content">
                <div class="left-column article-tree col-sm-3 hidden-print">
                    <!-- For Mobile -->
                    <div class="responsive-collapse">
                        <button type="button" class="btn btn-sidebar" id="menu-spinner-button">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                    </div>
                    <div id="sub-nav-collapse" class="sub-nav-collapse">
                        <!-- Navigation -->
                        <ul class="nav nav-list"><li><a href="../Getting_Started.html">Getting Started</a></li><li><a href="../Introduction/index.html" class="folder">Introduction</a><ul class="nav nav-list"><li><a href="../Introduction/Introduction.html">Introduction</a></li></ul></li><li><a href="#" class="aj-nav folder">Getting Started</a><ul class="nav nav-list"><li><a href="../Getting_Started/Very_First_Start.html">Very First Start</a></li><li><a href="../Getting_Started/Create_A_Bootable_MicroSD_card_for_UDOO.html">Create A Bootable MicroSD card for UDOO</a></li><li><a href="../Getting_Started/UDOO_Configuration_Tool.html">UDOO Configuration Tool</a></li></ul></li><li><a href="#" class="aj-nav folder">Advanced Setup</a><ul class="nav nav-list"><li><a href="../Advanced_Setup/Create_A_Bootable_MicroSD_Card_From_Preinstalled_Binaries.html">Create A Bootable MicroSD Card From Preinstalled Binaries</a></li><li><a href="../Advanced_Setup/Create_A_Bootable_MicroSD_Card_From_Sources.html">Create A Bootable MicroSD Card From Sources</a></li><li><a href="../Advanced_Setup/Compile_Android_From_Sources.html">Compile Android From Sources</a></li><li><a href="../Advanced_Setup/UDOO_Boot_From_SATA.html">UDOO Boot From SATA</a></li><li><a href="../Advanced_Setup/UDOO_Kernel_Update_Procedure.html">UDOO Kernel Update Procedure</a></li><li><a href="../Advanced_Setup/UDOO_Usb_Debug.html">UDOO Usb Debug</a></li></ul></li><li><a href="#" class="aj-nav folder">Connecting UDOO</a><ul class="nav nav-list"><li><a href="../Connecting UDOO/Connecting_Via_Serial_Cable.html">Connecting Via Serial Cable</a></li><li><a href="../Connecting UDOO/Find_IP_Address.html">Find IP Address</a></li><li><a href="../Connecting UDOO/Connecting_Via_SSH.html">Connecting Via SSH</a></li></ul></li><li class="open"><a href="#" class="aj-nav folder">Tutorials</a><ul class="nav nav-list"><li class="active"><a href="../Tutorials/Install_A_Custom_Debian_Distro_With_Debootstrap.html">Install A Custom Debian Distro With Debootstrap</a></li><li><a href="../Tutorials/Create_A_Virtual_Machine_For_UDOO_Development.html">Create A Virtual Machine For UDOO Development</a></li><li><a href="../Tutorials/Compile_Android_From_Sources.html">Compile Android From Sources</a></li><li><a href="../Tutorials/UDOO_Switch_Between_Adb_Debug_And_ADK_Connection.html">UDOO Switch Between Adb Debug And ADK Connection</a></li><li><a href="../Tutorials/UDOO_Configure_Ethernet_Under_Android.html">UDOO Configure Ethernet Under Android</a></li><li><a href="../Tutorials/UDOO_Programming_The_Embedded_Arduino_Microcontroller.html">UDOO Programming The Embedded Arduino Microcontroller</a></li><li><a href="../Tutorials/UDOO_Install_The_Arduino_IDE.html">UDOO Install The Arduino IDE</a></li></ul></li><li><a href="#" class="aj-nav folder">Linux</a><ul class="nav nav-list"><li><a href="../Linux/Understanding_Linux_Software_Management_And_Installing.html">Understanding Linux Software Management And Installing</a></li><li><a href="../Linux/Linux_Command_Line_Interface.html">Linux Command Line Interface</a></li><li><a href="../Linux/Create_A_Virtual_Machine_For_UDOO_Development.html">Create A Virtual Machine For UDOO Development</a></li><li><a href="../Linux/Install_Oracle_Java_Development_Kit_On_UDOO_Ubuntu.html">Install Oracle Java Development Kit On UDOO Ubuntu</a></li><li><a href="../Linux/UDOO_Webserver.html">UDOO Webserver</a></li><li><a href="../Linux/Program_Arduino_With_UDOO_IDE.html">Program Arduino With UDOO IDE</a></li><li><a href="../Linux/Linux_GPIO_Manipulation.html">Linux GPIO Manipulation</a></li><li><a href="../Linux/Install_A_Custom_Debian_Distro_With_Debootstrap.html">Install A Custom Debian Distro With Debootstrap</a></li></ul></li><li><a href="#" class="aj-nav folder">More Examples</a><ul class="nav nav-list"><li><a href="../More_Examples/Hello_World.html">Hello World</a></li></ul></li><li><a href="#" class="aj-nav folder">Android</a><ul class="nav nav-list"><li><a href="../Android/UDOO_Android_Boot_Walkthrough.html">UDOO Android Boot Walkthrough</a></li><li><a href="../Android/Android_And_Arduino_Simple_Hello_World_Tutorial.html">Android And Arduino Simple Hello World Tutorial</a></li><li><a href="../Android/Android_And_Arduino_On_UDOO_Bidirectional_Communication.html">Android And Arduino On UDOO Bidirectional Communication</a></li><li><a href="../Android/UDOO_Configure_Ethernet_Under_Android.html">UDOO Configure Ethernet Under Android</a></li><li><a href="../Android/How_To_Install_Gapps_On_UDOO_Running_Android.html">How To Install Gapps On UDOO Running Android</a></li><li><a href="../Android/UDOO_Switch_Between_Adb_Debug_And_ADK_Connection.html">UDOO Switch Between Adb Debug And ADK Connection</a></li></ul></li><li><a href="#" class="aj-nav folder">Arduino</a><ul class="nav nav-list"><li><a href="../Arduino/UDOO_Install_The_Arduino_IDE.html">UDOO Install The Arduino IDE</a></li><li><a href="../Arduino/Program_UDOO_Arduino_Processor_From_External_PC.html">Program UDOO Arduino Processor From External PC</a></li><li><a href="../Arduino/UDOO_Programming_The_Embedded_Arduino_Microcontroller.html">UDOO Programming The Embedded Arduino Microcontroller</a></li><li><a href="../Arduino/Arduino_Shields_With_UDOO.html">Arduino Shields With UDOO</a></li></ul></li><li><a href="#" class="aj-nav folder">Resources</a><ul class="nav nav-list"><li><a href="../Resources/UDOO_GPIO_Pinout.html">UDOO GPIO Pinout</a></li><li><a href="../Resources/IMX6_And_Sam3X_Communication.html">IMX6 And Sam3X Communication</a></li><li><a href="../Resources/UDOO_Setup_lvds_panels.html">UDOO Setup lvds panels</a></li><li><a href="../Resources/UDOO_Camera_Module.html">UDOO Camera Module</a></li><li><a href="../Resources/Official_Distributions.html">Official Distributions</a></li></ul></li><li><a href="#" class="aj-nav folder">Communication Between The 2 Processors</a><ul class="nav nav-list"><li><a href="../Communication_Between_The_2_Processors/UDOO_Seral_Libraries_Examples.html">UDOO Seral Libraries Examples</a></li><li><a href="../Communication_Between_The_2_Processors/Interaction_Between_Linux_And_Arduino_On_UDOO.html">Interaction Between Linux And Arduino On UDOO</a></li></ul></li><li><a href="#" class="aj-nav folder">Hardware & Accessories</a><ul class="nav nav-list"><li><a href="../Hardware & Accessories/UDOO_GPIO_Pinout.html">UDOO GPIO Pinout</a></li><li><a href="../Hardware & Accessories/IMX6_And_Sam3X_Communication.html">IMX6 And Sam3X Communication</a></li><li><a href="../Hardware & Accessories/UDOO_Setup_lvds_panels.html">UDOO Setup lvds panels</a></li><li><a href="../Hardware & Accessories/UDOO_Camera_Module.html">UDOO Camera Module</a></li><li><a href="../Hardware & Accessories/Connect_UDOO_Camera_Module.html">Connect UDOO Camera Module</a></li></ul></li><li><a href="#" class="aj-nav folder">Software & OS Distro</a><ul class="nav nav-list"><li><a href="../Software_&_OS_Distro/Official_Distributions.html">Official Distributions</a></li></ul></li><li><a href="#" class="aj-nav folder">Projects Examples</a><ul class="nav nav-list"><li><a href="../Projects_Examples/Face_Recognition_And_Face_Tracking_Via_OpenCV_And_UDOO.html">Face Recognition And Face Tracking Via OpenCV And UDOO</a></li><li><a href="../Projects_Examples/Remote_Metereological_Station_With_UDOO.html">Remote Metereological Station With UDOO</a></li><li><a href="../Projects_Examples/DIY_NAS_With_Openmediavault_And_UDOO.html">DIY NAS With Openmediavault And UDOO</a></li></ul></li><li><a href="../Serial_Libraries/index.html" class="folder">Serial Libraries</a><ul class="nav nav-list"><li><a href="../Serial_Libraries/Java_Serial_Libraries.html">Java Serial Libraries</a></li><li><a href="../Serial_Libraries/C_Serial_Libraries.html">C Serial Libraries</a></li><li><a href="../Serial_Libraries/PHP_Serial_Libraries.html">PHP Serial Libraries</a></li><li><a href="../Serial_Libraries/Python_Serial_Libraries.html">Python Serial Libraries</a></li></ul></li><li><a href="#" class="aj-nav folder">Mods</a><ul class="nav nav-list"><li><a href="../Mods/Mod_Your_UDOO_To_Improve_WiFi_Performances.html">Mod Your UDOO To Improve WiFi Performances</a></li></ul></li><li><a href="#" class="aj-nav folder">FAQ</a><ul class="nav nav-list"><li><a href="../FAQ/Introductive.html">Introductive</a></li></ul></li><li><a href="#" class="aj-nav folder">Troubleshooting</a><ul class="nav nav-list"><li><a href="../Troubleshooting/Why_My_UDOO_Wont_Boot.html">Why My UDOO Wont Boot</a></li><li><a href="../Troubleshooting/How_Can_I_Solve_My_HDMI_Issues.html">How Can I Solve My HDMI Issues</a></li><li><a href="../Troubleshooting/How_Do_I_Set_Up_My_LVDS_Panel.html">How Do I Set Up My LVDS Panel</a></li></ul></li><li><a href="#" class="aj-nav folder">Hackaton Survival Guide</a><ul class="nav nav-list"><li><a href="../Hackaton_Survival_Guide/Mirroring_UDOOs_Desktop_on_your_PC_with_VNC_Remote_Desktop.html">Mirroring UDOOs Desktop on your PC with VNC Remote Desktop</a></li><li><a href="../Hackaton_Survival_Guide/Programming_UDOOs_Arduino_from_your_PC.html">Programming UDOOs Arduino from your PC</a></li><li><a href="../Hackaton_Survival_Guide/Useful_Resources.html">Useful Resources</a></li></ul></li></ul>                                                    <div class="well well-sidebar">

                                <!-- Links -->
                                <a href="http://udoo.org" target="_blank">Home</a><br><a href="http://udoo.org/downloads" target="_blank">Downloads</a><br><a href="http://udoo.org/tutorial" target="_blank">Tutorials</a><br><a href="http://udoo.org/forum" target="_blank">Forum</a><br>                                <a href="#" id="toggleCodeBlockBtn" onclick="toggleCodeBlocks();">Show Code Blocks Inline</a><br>
                                <!-- Twitter -->
                                                                    <div class="twitter">
                                        <hr/>
                                        <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=UDOO_Board&amp;show_count=false"></iframe>
                                    </div>
                                                            </div>
                                            </div>
                </div>
                <div class="right-column float-view content-area col-sm-9">
                    <div class="content-page">
                        <article>
                                                            <div class="page-header">
                                    <h1>Install A Custom Debian Distro With Debootstrap                                                                            </h1>
                                </div>
                            
                            <p><strong>Prerequisites</strong></p>
<ul>
<li>A SD card for the resulting system (1GB or larger)</li>
<li>Official UDOO Kernel and Modules for your model <a href="http://www.udoo.org/downloads/">http://www.udoo.org/downloads/</a></li>
<li>U-boot for your model <a href="http://www.udoo.org/downloads/">http://www.udoo.org/downloads/</a></li>
<li>Debian or Linux OS for creating the install</li>
</ul>
<p><strong>Required software</strong></p>
<p><strong>(Available through apt-get)</strong></p>
<ul>
<li>binfmt-support</li>
<li>qemu-user-static</li>
<li>debootstrap</li>
</ul>
<p>I'm going to use /dev/sdb to represent the SD card and ~/deb as the directory I'm building Debian in.</p>
<p>You can also use a SATA disk instead of an SD card, if using a SATA disk, it is even possible to build the system entirely on the UDOO.</p>
<p>Also, with SATA be sure to <a href="/docs/Advanced_Setup/UDOO_Boot_From_SATA#prepareuboot">setup U-Boot</a></p>
<p>Substitute these with your own paths as needed.</p>
<p>First, you need to partition the SD card. Leave room before the primary partition to place uboot. Uboot needs to start at offset 1024B.</p>
<p>Here is an example SD card layout, as displayed by fdisk:</p>
<pre><code class="language-bash">
 Device Boot       Start         End      Blocks   Id  System
   /dev/sdb1    16065    13414274     6699105   83  Linux
</code></pre>
<p>(units: 512B sectors)</p>
<p>You can format and mount the Linux partition with:</p>
<pre><code class="language-bash">
# mkfs.ext3 /dev/sdb1
# mount /dev/sdb1 /mnt
</code></pre>
<p>You could also mount your device to ~/dev is you want to build directly on a SD card or SATA disk.</p>
<p>Flash U-Boot by running the following command: (This is required to be on the SD even if using SATA)</p>
<pre><code class="language-bash">
(Replace u-boot-q.bin with the name of the U-Boot file you downloaded)

dd if=u-boot-q.bin of=/dev/sdb bs=512 seek=2 skip=2

NOTE: We are using /dev/sdb here, NOT sdb1, Also, be sure sdb is the sd card
</code></pre>
<h2>Bootstrapping Debian</h2>
<h3>First Stage</h3>
<p>First, lets create our working directory</p>
<pre><code class="language-bash">
# mkdir ~/deb
</code></pre>
<p>Then we can run the first stage of installing Debian</p>
<pre><code class="language-bash">
# debootstrap --foreign --arch=armhf wheezy ~/deb

NOTE: For soft-float use --arch=armel instead
</code></pre>
<p>Once that completes we are almost ready for the second stage, but before we do that, we must copy qemu's arm binary to the new distro. This will allow us to chroot into the new system.</p>
<pre><code class="language-bash">
# cp /usr/bin/qemu-arm-static ~/deb/usr/bin/
</code></pre>
<h3>Second Stage</h3>
<p>Now, we install the second stage</p>
<pre><code class="language-bash">
# chroot ~/deb /debootstrap/debootstrap --second-stage
</code></pre>
<p>This will chroot into the new system and complete the install. You can optionally remove qemu-arm-static from the new install at this point.</p>
<p>Now its time to install the kernel</p>
<pre><code class="language-bash">
# cp path/to/uImage ~/dev/boot
# cd ~/deb
# tar xzf path/to/modules.tar.gz
</code></pre>
<p>Note: replace path/to with the path where you placed the kernel and modules. If using SATA, be sure to place uImage on the SD card also. Otherwise you will not be able to boot.</p>
<h2>Post install changes</h2>
<p>We now have a working Debian system that will boot, however, we will not have networking.</p>
<p>chroot into the system:</p>
<pre><code class="language-bash">
# chroot ~/deb
</code></pre>
<p>edit etc/network/interfaces to add the eth0 interface</p>
<pre><code class="language-bash">
# nano /etc/network/interfaces

auto eth0
iface eth0 inet dhcp
</code></pre>
<p>also, edit the bottom of /etc/inittab if you want a serial terminal</p>
<pre><code class="language-bash">
T1:23:respawn:/sbin/getty -L ttymxc1 115200 vt100
</code></pre>
<p>You may also apt-get any additional packages, once on an SD card, write performance is usually slower.</p>
<p>Packages you may want</p>
<pre><code class="language-bash">
openssh-server for SSH

firmware-ralink  for the wifi

wpasupplicant for wifi connections

lxde or xfce for a desktop enviroment

tightvncserver for remote desktop

git because who DOESN'T download from git?

bluetooth for bluetooth support
</code></pre>
<p>Once done, exit the chroot.</p>
<h2>Transfer to SD card</h2>
<p>If you chose to build the system directly on SD or SATA you can skip this step. Now we can copy the new system to your sd card or SATA disk.</p>
<pre><code class="language-bash">
# cd ~/deb/
# cp -rp * /mnt/
</code></pre>
<p>Once complete its now time to boot!</p>
<h2>Boot!</h2>
<p>Now the system is ready for booting! You should already have all the drivers you need for the hardware, some like bluetooth, may require additional software.</p>
<p>This guide has been adapted from the guide over at the <a href="https://community.freescale.com/docs/DOC-95044">Freescale community</a>.</p>
<h2>Binary Tarball</h2>
<p>Binary tarballs are available below:</p>
<p>debian_wheezy_armhf_base system <a href="http://down.ags131.us/udoo_debian_wheezy.tgz">http://down.ags131.us/udoo_debian_wheezy.tgz</a></p>
<p>debian_wheezy_armel_lxde system <a href="http://down.ags131.us/debian_wheezy_armel_lxde.tgz">http://down.ags131.us/debian_wheezy_armel_lxde.tgz</a></p>
<p>just download it and</p>
<pre><code class="language-bash">
 tar xzf udoo_debian_wheezy.tgz 
</code></pre>
<p>inside your sdcard, SATA disk or staging directory rather than going through debootstrap</p>
<p>user is root password is debian</p>
<p>LXDE Downloads have vnc autostarted <IPADDRESS>:1 pass is debian</p>                                                    </article>
                    </div>
                </div>
            </div>
        </div>
    
                <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-40057783-1', '');ga('send', 'pageview');</script>    

    <!-- jQuery -->
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined')
                document.write(unescape("%3Cscript src='../js/jquery-1.11.0.min.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
    
    <!-- hightlight.js -->
    <script src="../js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <!-- Front end file editor -->
        <script src="../js/custom.js"></script>
    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</body>
</html>

